<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Genome Maps</title>


<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67004967-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- build:style vendor -->
<link type="text/css" rel="stylesheet" href="../lib/jsorolla/vendor/ChemDoodleWeb.css"/>
<link type="text/css" rel="stylesheet" href="../lib/jsorolla/vendor/jquery.qtip.min.css"/>
<link type="text/css" rel="stylesheet" href="../lib/jsorolla/vendor/bootstrap-scoped-dist/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="../lib/jsorolla/vendor/typeahead.js-bootstrap.css">
<!-- /build -->


<!-- build:style css -->
<link type="text/css" rel="stylesheet" href="../lib/jsorolla/styles/css/style.css"/>
<!-- /build -->

<script type="text/javascript">
    WORKERS_PATH = "./";
</script>




<!-- build:script vendor -->
<script type="text/javascript" src="../lib/jsorolla/vendor/underscore-min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/backbone-min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/rawdeflate.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/xml2json.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/jquery.min.js"></script>

<!-- These dependencies must go AFTER jquery -->
<script type="text/javascript" src="../lib/jsorolla/vendor/bootstrap-scoped-dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/typeahead.min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/jquery.qtip.min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/jquery.cookie.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/jquery.sha1.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/purl.min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/gl-matrix-min.js"></script>
<script type="text/javascript" src="../lib/jsorolla/vendor/ChemDoodleWeb.js"></script>
<!-- /build -->


<!-- build:script config -->
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/gv-config.js"></script>
<!-- /build -->

<script type="text/javascript" src="gm-config.js"></script>

<!-- build:script lib -->

<script type="text/javascript" src="../lib/jsorolla/src/lib/svg.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/utils.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/ux-window.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/info/info-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/info/gene-info-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/info/protein-info-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/info/snp-info-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/info/transcript-info-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/info/vcf-variant-info-widget.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/cellbase-manager.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/cellbase-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/sequence-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/opencga-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/bam-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/feature-data-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/vcf-data-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/gff2-data-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/gff3-data-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/bed-data-adapter.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-adapter/feature/das-adapter.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/data-source/data-source.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-source/string-data-source.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/data-source/file-data-source.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/region.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/feature-binary-search-tree.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/cache/feature-cache.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/cache/bam-cache.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/cache/memory-store.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/cache/feature-chunk-cache.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/legend-panel.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/legend-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/url-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/file-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/vcf-file-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/gff-file-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/feature/file/bed-file-widget.js"></script>


<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/navigation-bar.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/chromosome-panel.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/karyotype-panel.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/tracks/tracklist-panel.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/status-bar.js"></script>


<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/tracks/track.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/tracks/feature-track.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/tracks/sequence-track.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/tracks/gene-track.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/tracks/bam-track.js"></script>


<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/feature-renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/sequence-renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/feature-cluster-renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/histogram-renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/gene-renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/bam-renderer.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/renderers/vcf-multisample-renderer.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/genome-viewer/genome-viewer.js"></script>

<script type="text/javascript" src="../lib/jsorolla/src/lib/opencga-manager.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/generic-form-panel.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/user-list-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/check-browser.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/header-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/job-list-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/login-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/opencga-browser-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/paged-view-list-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/profile-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/result2-widget.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/result-table.js"></script>
<script type="text/javascript" src="../lib/jsorolla/src/lib/widgets/opencga/upload-widget.js"></script>

<script type="text/javascript">
    WORKERS_PATH = "../lib/jsorolla/src/lib/opencga/";
</script>
<!-- /build -->

<!-- JS from GenomeMaps -->
<!-- build:script js -->
<script type="text/javascript" src="./gm-plugins-config.js"></script>
<script type="text/javascript" src="./gm-navigation-bar.js"></script>
<script type="text/javascript" src="./gm-status-bar.js"></script>
<script type="text/javascript" src="./genome-maps.js"></script>
<!-- /build -->

<script>
    $(function () {
        //CheckBrowser();
        window.genomeMaps = new GenomeMaps({
            targetId: 'application',
            autoRender: true
        }); //the div must exist
        window.genomeMaps.draw();

        OpencgaManager.setHost("http://localhost:8000/opencga-server-beta/rest");
        $.cookie("bioinfo_sid", "tvp36wV5inMN97s6rxw5");

        // add bam track
        var object = {"acl":[],"creationTime":"20130524163241","date":"20130524163241","description":"","diskUsage":188671102,"fileBioType":"","fileFormat":"bam","fileName":"HG00096.chrom20.ILLUMINA.bwa.GBR.exome.20111114.bam","fileType":"r","organization":"","responsible":"","status":"ready","bucketId":"default","oid":"HG00096.chrom20.ILLUMINA.bwa.GBR.exome.20111114.bam","leaf":true,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSRâ€¦b6Df7wB/5eA+4zmEyehxk451itPrhFksSxUeP+lf+z+wXwdayJk/mqtgAAAABJRU5ErkJggg==","text":"HG00096.chrom20.ILLUMINA.bwa.GBR.exome.20111114.bam","qtip":"HG00096.chrom20.ILLUMINA.bwa.GBR.exome.20111114.bam","account":"bam"};
        var bamTrack = new BamTrack({
            targetId: null,
            title: "HG00096.chrom20.ILLUMINA.bwa.GBR.exome.20111114.bam",
            histogramZoom: 0,
            height: 200,
            visibleRange: {start: 60, end: 100},

            renderer: new BamRenderer(FEATURE_TYPES.bam),

            dataAdapter: new BamAdapter({
                category: "bam",
                resource: object,
                species: genomeMaps.species,
                cacheConfig: {
                    chunkSize: 50000
                },
                filters: {},
                options: {},
                featureConfig: FEATURE_CONFIG.bam
            })
        });

        genomeMaps.addTrack(bamTrack);


        function handleDragEnter(e) {
            e.preventDefault();
            $("#dropreception").addClass('dropacceptable');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            $("#dropreception").removeClass('dropacceptable');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.originalEvent.dataTransfer.dropEffect = 'copy';
            return false;
        }

        function handleDrop(e) {
            if (e.stopPropagation) e.stopPropagation();
            e.preventDefault();
            $("#dropreception").removeClass('dropacceptable');

            console.log(e.originalEvent.dataTransfer.files);
            return false;
        }

        $("body").on("dragenter", handleDragEnter)
        $("#dropreception")
            .on("dragleave", handleDragLeave)
            .on("dragover", handleDragOver)
            .on("drop", handleDrop)
            .on("dragend", handleDragLeave);
    });
</script>
<style type="text/css">
    html,body {
        overflow: hidden;
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
    }

    body {
        background-color: #f5f5f5;
    }

    #dropreception {
        display: none;
    }

    #dropreception.dropacceptable {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 900;
        display: block;
        background: rgb(122, 122, 255);
        border: 6px solid lightblue;
        opacity: 0.5;
    }

    #application {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }

    .genome-maps #genome-maps {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .genome-maps #genome-maps #gm-header-widget {
    }

    .genome-maps #genome-maps #gm-genome-viewer {
        position: absolute;
        top: 0;
        bottom: 0;
    }

    .genome-maps #genome-viewer > div {
        position: relative;
        height: 100%;
    }

    .genome-maps #gm-genome-viewer div.ocb-gv-navigation {
        position: absolute;
        top: 0;
        width: 100%;
        height: 150%;
        overflow: hidden;
    }

    .genome-maps #gm-genome-viewer div.ocb-gv-navigation ul.dropdown-menu {
        max-height: 350px;
        overflow-y: auto;
    }

    .genome-maps #gm-genome-viewer div.ocb-gv-center {
        position: absolute;
        top: 40px;
        bottom: 30px;
        width: 100%;
        overflow-y: scroll;
        overflow-x: hidden;
    }

    .genome-maps #gm-genome-viewer div.ocb-gv-status {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 26px;
        overflow: hidden;
        border: 1px solid lightgrey;
        z-index: 50;
        background-color: #f5f5f5;
    }
</style>
</head>
<body>
<div id="dropreception"></div>
<div id="checkBrowser"></div>
<div id="application"></div>
</body>
</html>
